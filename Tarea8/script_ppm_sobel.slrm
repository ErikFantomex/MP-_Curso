#!/bin/bash
# PBS Job Script para uso de mpi
#Modifique segun el numero de procesadores necesitados
#PBS -l nodes=1:ppn=4
#PBS -l walltime=00:10:00
#PBS -N MPI
#PBS -V
#PBS -q general
#PBS -k eo
module load intel/oneAPI-2021
mpicc sobel_mpi_ppm.c -o mpi_ppm  -lm -std=c99
for t in $(seq 1 4)
do
  echo "  ------------------------ Esperando $t segundos ------------"
  for i in $(seq 10 16) 
  do
    mpirun -np $i  ./mpi_ppm graylena.ppm prueba_graylena_sobel.ppm $t
  done
done
